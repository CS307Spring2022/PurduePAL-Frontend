"use strict";(self.webpackChunkpurduepal_fe=self.webpackChunkpurduepal_fe||[]).push([[169],{4169:function(e,t,n){n.r(t),n.d(t,{default:function(){return z}});var r=n(5861),o=n(9439),a=n(1413),i=n(5987),l=n(7757),s=n.n(l),c=n(890),u=n(3967),d=n(5193),p=n(7630),f=n(1889),h=n(3400),m=n(3767),x=n(5725),g=n(5091),Z=n(6151),j=n(9952),b=n(1286),v=n(2791),y=n(5228),w=n(3896),S=n(4554),C=n(8690),P=n(748),k=n(4010),T=n(501),F=n(5489),N=n(7621),I=n(9585),O=n(3044),U=n(184),E={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,height:"75%",bgcolor:"#000",border:"2px solid #ddd",boxShadow:24,p:4,overflowY:"scroll"},J=function(e){var t=e.name;e.bio;return(0,U.jsx)(N.Z,{children:(0,U.jsx)(I.Z,{avatar:(0,U.jsx)(O.Z,{"aria-label":"recipe"}),title:t})})},W=function(e){var t=e.name;return(0,U.jsx)(N.Z,{children:(0,U.jsx)(I.Z,{title:t})})};function _(e){var t=e.number,n=e.property,r=e.data,a=e.isTopic,i=(0,u.Z)(),l=v.useState(!1),s=(0,o.Z)(l,2),d=s[0],p=s[1];return(0,U.jsxs)("div",{children:[(0,U.jsx)(Z.Z,{onClick:function(){return p(!0)},disableRipple:!0,disableElevation:!0,children:(0,U.jsxs)(m.Z,{direction:"row",spacing:.5,children:[(0,U.jsx)(c.Z,{variant:"subtitle2",children:t||r.length}),(0,U.jsx)(c.Z,{variant:"subtitle2",color:"#c4c4c4",children:n})]})}),(0,U.jsx)(x.Z,{open:d,onClose:function(){return p(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,U.jsx)(S.Z,{sx:E,children:(0,U.jsxs)(m.Z,{spacing:1,children:[(0,U.jsx)(c.Z,{id:"modal-modal-title",variant:"h4",component:"h2",color:i.palette.primary.main,children:(0,U.jsx)("strong",{children:n})}),a?r.map((function(e){return(0,U.jsx)(W,{name:e},e)})):r.map((function(e,t){return(0,U.jsx)(J,{name:e.name},t)}))]})})})]})}var q=["children","value","index"];function B(e){var t=e.children,n=e.value,r=e.index,o=(0,i.Z)(e,q);return(0,U.jsx)("div",(0,a.Z)((0,a.Z)({role:"tabpanel",hidden:n!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r)},o),{},{children:n===r&&(0,U.jsx)(S.Z,{sx:{p:3},children:(0,U.jsx)(c.Z,{color:"#fff",children:t})})}))}function D(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}function H(){var e=(0,v.useState)(0),t=(0,o.Z)(e,2),n=t[0],r=t[1];return(0,U.jsxs)(S.Z,{sx:{width:"100%"},children:[(0,U.jsx)(S.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,U.jsxs)(y.Z,{value:n,onChange:function(e,t){r(t)},"aria-label":"basic tabs example",variant:"fullWidth",children:[(0,U.jsx)(w.Z,(0,a.Z)({label:"Posts"},D(0))),(0,U.jsx)(w.Z,(0,a.Z)({label:"Interactions"},D(1)))]})}),(0,U.jsx)(B,{value:n,index:0,children:"Posts"}),(0,U.jsx)(B,{value:n,index:1,children:"Interactions"})]})}var L={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:800,bgcolor:"secondary.main",border:"2px solid #000",boxShadow:50,p:4},z=function(e){var t=e.data,n=(0,u.Z)(),a=(0,d.Z)(n.breakpoints.up("md")),i="calc(100vw - ".concat(a?"200":"75","px)"),l=(0,T.lr)(),y=(0,o.Z)(l,1)[0],w=(0,v.useState)(y.get("user")===localStorage.getItem("username")),N=(0,o.Z)(w,1)[0],I=(0,v.useContext)(k.Z),O=(0,o.Z)(I,1)[0],E=(0,v.useState)(!1),J=(0,o.Z)(E,2),W=J[0],q=J[1],B=function(){function e(){return(e=(0,r.Z)(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("email"),n={firstName:R,lastName:ne,bio:he,email:t},console.log(JSON.stringify(n)),e.next=5,fetch("".concat(F.H,"/updateUserInfo"),{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}q(!1),function(){e.apply(this,arguments)}()},D=(0,v.useState)(t.firstName),z=(0,o.Z)(D,2),R=z[0],Y=z[1],A=(0,v.useState)(!1),G=(0,o.Z)(A,2),K=G[0],M=G[1],Q=(0,v.useState)(""),V=(0,o.Z)(Q,2),X=V[0],$=V[1],ee=(0,v.useState)(t.lastName),te=(0,o.Z)(ee,2),ne=te[0],re=te[1],oe=(0,v.useState)(!1),ae=(0,o.Z)(oe,2),ie=ae[0],le=ae[1],se=(0,v.useState)(""),ce=(0,o.Z)(se,2),ue=ce[0],de=ce[1],pe=(0,v.useState)(t.bio),fe=(0,o.Z)(pe,2),he=fe[0],me=fe[1],xe=(0,v.useState)(!0),ge=(0,o.Z)(xe,2),Ze=ge[0],je=ge[1],be=(0,v.useState)(""),ve=(0,o.Z)(be,2),ye=ve[0],we=ve[1];(0,v.useEffect)((function(){function e(){return(e=(0,r.Z)(s().mark((function e(){var t,n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("email"),n=localStorage.getItem("username"),r=y.get("user"),console.log({loggedEmail:t,loggedUser:n,profileUser:r}),e.next=6,fetch("".concat(F.H,"/getUser"),{method:"POST",body:JSON.stringify({loggedEmail:t,loggedUser:n,profileUser:r}),headers:{"Content-Type":"application/json"}});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[y]);for(var Se=(0,p.ZP)("input")({display:"none"}),Ce=(0,v.useState)(t.followingUsers),Pe=(0,o.Z)(Ce,2),ke=Pe[0],Te=Pe[1],Fe=[],Ne=0;Ne<t.followingUsers.length;Ne++)Fe.push(t.followingUsers[Ne].name);var Ie=(0,v.useState)(O&&N?0:Number(t.loggedFollows)+1),Oe=(0,o.Z)(Ie,2),Ue=Oe[0],Ee=Oe[1];function Je(){return(Je=(0,r.Z)(s().mark((function e(){var n,r,o,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={follower:localStorage.getItem("email"),following:t._id},console.log(n),1!==Ue){e.next=8;break}return e.next=5,fetch("http://localhost:5000/followUser",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}});case 5:r=e.sent,e.next=12;break;case 8:if(2!==Ue){e.next=12;break}return e.next=11,fetch("http://localhost:5000/unfollowUser",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}});case 11:r=e.sent;case 12:if(r.ok){e.next=15;break}return console.log(r),e.abrupt("return");case 15:return e.next=17,r.json();case 17:if(o=e.sent,console.log(o),!o.message){e.next=31;break}return e.next=22,fetch("http://localhost:5000/getFollowers",{method:"POST",body:JSON.stringify({email:t._id}),headers:{"Content-Type":"application/json"}});case 22:if((r=e.sent).ok){e.next=26;break}return console.log(r),e.abrupt("return");case 26:return e.next=28,r.json();case 28:a=e.sent,console.log(a),Te(a.newFollowing);case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return console.log(Ue),(0,v.useEffect)((function(){R.length>0&&X?($(""),M(!1)):je(!0)}),[R,X]),(0,v.useEffect)((function(){ne.length>0&&ue?(de(""),le(!1)):je(!0)}),[ne,ue]),(0,v.useEffect)((function(){he.length>0&&he.length<240?(we(""),je(!1)):je(!0)}),[he,ye]),(0,U.jsxs)(f.ZP,{container:!0,spacing:2,children:[(0,U.jsx)(f.ZP,{width:i,justifyContent:"center",alignItems:"center",item:!0,container:!0,children:(0,U.jsxs)(f.ZP,{sm:12,mt:2,item:!0,container:!0,justifyContent:"space-around",direction:"row",spacing:4,children:[(0,U.jsx)(f.ZP,{sm:2,item:!0,children:(0,U.jsxs)("label",{htmlFor:"upload-profile-picture",children:[(0,U.jsx)(Se,{accept:"image/png",id:"upload-profile-picture",type:"file",onChange:function(e){return function(e){e.preventDefault();var t=new FormData;function n(){return(n=(0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(F.H,"/addProfileImage"),{method:"POST",body:t});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.append("profileImage",e.target.files[0]),t.append("email",localStorage.getItem("email")),function(){n.apply(this,arguments)}()}(e)}}),(0,U.jsx)(h.Z,{color:"primary",component:"span","aria-label":"upload profile picture",children:t.profilePic.length>"data:image/png;base64,".length?(0,U.jsx)("img",{src:t.profilePic,alt:"profile pic of user",width:100,height:100}):(0,U.jsx)(j.Z,{sx:{fontSize:"100px"}})})]})}),(0,U.jsx)(f.ZP,{sm:7,item:!0,children:(0,U.jsxs)(m.Z,{direction:"column",children:[(0,U.jsx)(c.Z,{color:"#fff",variant:"h4",children:"".concat(R," ").concat(ne)}),(0,U.jsx)(c.Z,{color:"#ddd",variant:"subtitle1",children:"@".concat(t.username)})]})}),(0,U.jsxs)(f.ZP,{sm:2,item:!0,children:[O&&N?(0,U.jsx)(h.Z,{color:"primary",variant:"outlined",onClick:function(){return q(!0)},children:(0,U.jsx)(b.Z,{})}):(0,U.jsxs)(h.Z,{color:"primary",onClick:function(){!function(){Je.apply(this,arguments)}(),Ee(1===Ue?2:1)},children:[2===Ue?(0,U.jsx)(C.Z,{color:"primary"}):(0,U.jsx)(P.Z,{color:"primary"}),2===Ue?"Following":"Follow"]}),(0,U.jsx)(x.Z,{open:W,onClose:B,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,U.jsxs)(S.Z,{sx:L,children:[(0,U.jsx)(c.Z,{color:"#fff",id:"modal-modal-title",variant:"h6",component:"h2",children:"Edit Profile Details"}),(0,U.jsx)(g.Z,{margin:"normal",required:!0,fullWidth:!0,id:"changeFirstName",label:"First Name",name:"changeFirstName",autoComplete:"given-name",autoFocus:!0,error:K,onChange:function(e){return Y(e.target.value)},helperText:X}),(0,U.jsx)(g.Z,{margin:"normal",required:!0,fullWidth:!0,id:"changeLastName",label:"Last Name",name:"changeLastName",autoComplete:"given-name",autoFocus:!0,error:ie,onChange:function(e){return re(e.target.value)},helperText:ue}),(0,U.jsx)(g.Z,{margin:"normal",required:!0,fullWidth:!0,id:"Bio",label:"Bio",name:"bio",autoComplete:"given-name",autoFocus:!0,error:Ze,onChange:function(e){return me(e.target.value)},helperText:ye}),(0,U.jsx)(Z.Z,{variant:"filled",color:"success",disabled:Ze||ie||K,onClick:B,children:"Submit"})]})})]})]})}),(0,U.jsx)(f.ZP,{item:!0,ml:2.5,children:(0,U.jsx)(c.Z,{variant:"h6",color:"#fff",children:"".concat(he)})}),(0,U.jsx)(f.ZP,{item:!0,ml:2.5,sm:12,children:(0,U.jsxs)(m.Z,{direction:"row",spacing:3,children:[(0,U.jsx)(_,{property:"Followers",data:ke,isTopic:!1}),(0,U.jsx)(_,{property:"Following",data:t.usersFollowing,isTopic:!1}),(0,U.jsx)(_,{property:"Topics",data:t.topicsFollowing,isTopic:!0})]})}),(0,U.jsx)(f.ZP,{item:!0,sm:12,children:(0,U.jsx)(H,{})})]})}}}]);
//# sourceMappingURL=169.d311c60c.chunk.js.map
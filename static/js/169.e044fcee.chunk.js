"use strict";(self.webpackChunkpurduepal_fe=self.webpackChunkpurduepal_fe||[]).push([[169],{4169:function(e,t,n){n.r(t),n.d(t,{default:function(){return z}});var a=n(5861),r=n(9439),o=n(1413),i=n(5987),l=n(7757),s=n.n(l),c=n(3767),d=n(3967),u=n(5193),p=n(7630),h=n(1889),m=n(3400),f=n(890),x=n(5725),g=n(9431),Z=n(6151),j=n(9952),b=n(1286),w=n(2791),y=n(5228),S=n(3896),v=n(4554),C=n(8690),k=n(748),I=n(4010),T=n(4951),P=n(501),F=n(5489),N=n(7621),U=n(9585),O=n(3044),E=n(2363),J=n(184),B=function(e){var t=e.name,n=e.username,r=e.showUnfollow,o=e.theme;return(0,J.jsxs)(N.Z,{sx:{backgroundColor:"dark"===o.palette.mode?"#121212":"#CFB991"},children:[(0,J.jsx)(U.Z,{avatar:(0,J.jsx)(O.Z,{"aria-label":"recipe"}),title:t}),r?(0,J.jsx)(E.Z,{children:(0,J.jsx)(Z.Z,{onClick:function(){!function(e){function t(){return(t=(0,a.Z)(s().mark((function t(){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={follower:localStorage.getItem("email"),username:e},t.next=3,fetch("http://localhost:5000/unfollowUser",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}});case 3:window.location.reload();case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}(n)},children:"Unfollow"})}):null]})},W=function(e){var t=e.name,n=e.showUnfollow,r=e.theme;return(0,J.jsxs)(N.Z,{sx:{backgroundColor:"dark"===r.palette.mode?"#121212":"#CFB991"},children:[(0,J.jsx)(U.Z,{title:t}),n?(0,J.jsx)(E.Z,{children:(0,J.jsx)(Z.Z,{onClick:function(){!function(e){function t(){return(t=(0,a.Z)(s().mark((function t(){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={email:localStorage.getItem("email"),topic:e},t.next=3,fetch("http://localhost:5000/unfollowTopic",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}});case 3:window.location.reload();case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}(t)},children:"Unfollow"})}):null]})};function _(e){var t=e.number,n=e.property,a=e.data,o=e.isTopic,i=(0,d.Z)(),l={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,height:"75%",bgcolor:i.palette.background.default,border:"2px solid #ddd",boxShadow:24,p:4,overflowY:"scroll"},s=w.useState(!1),u=(0,r.Z)(s,2),p=u[0],h=u[1],m=(0,P.lr)(),g=(0,r.Z)(m,1)[0],j=(0,w.useState)(g.get("user")===localStorage.getItem("username")),b=(0,r.Z)(j,1)[0],y=(0,w.useContext)(I.Z),S=y.isSignedIn;y.setIsSignedIn,y.userTheme,y.setUserTheme;return(0,J.jsxs)("div",{children:[(0,J.jsx)(Z.Z,{onClick:function(){return h(!0)},disableRipple:!0,disableElevation:!0,children:(0,J.jsxs)(c.Z,{direction:"row",spacing:.5,children:[(0,J.jsx)(f.Z,{color:i.palette.primary.main,variant:"subtitle2",children:t||a.length}),(0,J.jsx)(f.Z,{variant:"subtitle2",color:"dark"===i.palette.mode?"#c4c4c4":"#222",children:n})]})}),(0,J.jsx)(x.Z,{open:p,onClose:function(){return h(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,J.jsx)(v.Z,{sx:l,children:(0,J.jsxs)(c.Z,{spacing:1,children:[(0,J.jsx)(f.Z,{id:"modal-modal-title",variant:"h4",component:"h2",color:i.palette.primary.main,children:(0,J.jsx)("strong",{children:n})}),o?a.map((function(e){return(0,J.jsx)(W,{name:e,showUnfollow:S&&b,theme:i},e)})):a.map((function(e,t){return(0,J.jsx)(B,{name:e.name,username:e.username,showUnfollow:S&&b,theme:i},t)}))]})})})]})}var q=["children","value","index","data","isSignedIn"];function D(e){e.children;var t=e.value,n=e.index,a=e.data,r=e.isSignedIn,l=(0,i.Z)(e,q);return(0,J.jsx)("div",(0,o.Z)((0,o.Z)({role:"tabpanel",hidden:t!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},l),{},{children:t===n&&a&&(0,J.jsx)(v.Z,{sx:{p:3},children:(0,J.jsx)(c.Z,{spacing:1,justifyContent:"center",alignItems:"center",children:a.map((function(e,t){return(0,J.jsx)(T.V,{isProfile:r,data:e},t)}))})})}))}function H(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}function L(e){var t=e.data,n=(e.isSignedIn,(0,w.useState)(0)),a=(0,r.Z)(n,2),i=a[0],l=a[1];return(0,J.jsxs)(v.Z,{sx:{width:"100%"},children:[(0,J.jsx)(v.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,J.jsxs)(y.Z,{value:i,onChange:function(e,t){l(t)},"aria-label":"basic tabs example",variant:"fullWidth",children:[(0,J.jsx)(S.Z,(0,o.Z)({label:"Posts"},H(0))),(0,J.jsx)(S.Z,(0,o.Z)({label:"Interactions"},H(1)))]})}),(0,J.jsx)(D,{isSignedIn:null===localStorage.getItem("email"),value:i,index:0,data:t.createdPostsObject,children:"Posts"}),(0,J.jsx)(D,{isSignedIn:!0,value:i,index:1,data:t.interactedPostsObject,children:"Interactions"})]})}var R={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:800,bgcolor:"secondary.main",border:"2px solid #000",boxShadow:50,p:4},z=function(e){var t=e.data,n=(0,d.Z)(),o=(0,u.Z)(n.breakpoints.up("md")),i="calc(100vw - ".concat(o?"200":"75","px)"),l=(0,P.lr)(),y=(0,r.Z)(l,1)[0],S=(0,w.useState)(y.get("user")===localStorage.getItem("username")),T=(0,r.Z)(S,1)[0],N=(0,w.useContext)(I.Z),U=N.isSignedIn,O=(N.setIsSignedIn,N.userTheme,N.setUserTheme,(0,w.useState)(!1)),E=(0,r.Z)(O,2),B=E[0],W=E[1],q=function(){function e(){return(e=(0,a.Z)(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("email"),n={firstName:z,lastName:ne,bio:me,email:t},e.next=4,fetch("".concat(F.H,"/updateUserInfo"),{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}W(!1),function(){e.apply(this,arguments)}()},D=(0,w.useState)(t.firstName),H=(0,r.Z)(D,2),z=H[0],V=H[1],Y=(0,w.useState)(!1),A=(0,r.Z)(Y,2),G=A[0],K=A[1],M=(0,w.useState)(""),Q=(0,r.Z)(M,2),X=Q[0],$=Q[1],ee=(0,w.useState)(t.lastName),te=(0,r.Z)(ee,2),ne=te[0],ae=te[1],re=(0,w.useState)(!1),oe=(0,r.Z)(re,2),ie=oe[0],le=oe[1],se=(0,w.useState)(""),ce=(0,r.Z)(se,2),de=ce[0],ue=ce[1],pe=(0,w.useState)(t.bio),he=(0,r.Z)(pe,2),me=he[0],fe=he[1],xe=(0,w.useState)(!0),ge=(0,r.Z)(xe,2),Ze=ge[0],je=ge[1],be=(0,w.useState)(""),we=(0,r.Z)(be,2),ye=we[0],Se=we[1];(0,w.useEffect)((function(){function e(){return(e=(0,a.Z)(s().mark((function e(){var t,n,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("email"),n=localStorage.getItem("username"),a=y.get("user"),e.next=5,fetch("".concat(F.H,"/getUser"),{method:"POST",body:JSON.stringify({loggedEmail:t,loggedUser:n,profileUser:a}),headers:{"Content-Type":"application/json"}});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[y]);for(var ve=(0,p.ZP)("input")({display:"none"}),Ce=(0,w.useState)(t.followingUsers),ke=(0,r.Z)(Ce,2),Ie=ke[0],Te=ke[1],Pe=[],Fe=0;Fe<t.followingUsers.length;Fe++)Pe.push(t.followingUsers[Fe].name);var Ne=(0,w.useState)(U&&T?0:Number(t.loggedFollows)+1),Ue=(0,r.Z)(Ne,2),Oe=Ue[0],Ee=Ue[1];function Je(){return(Je=(0,a.Z)(s().mark((function e(){var n,a,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={follower:localStorage.getItem("email"),following:t._id},1!==Oe){e.next=7;break}return e.next=4,fetch("http://localhost:5000/followUser",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}});case 4:a=e.sent,e.next=11;break;case 7:if(2!==Oe){e.next=11;break}return e.next=10,fetch("http://localhost:5000/unfollowUser",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}});case 10:a=e.sent;case 11:if(a.ok){e.next=13;break}return e.abrupt("return");case 13:return e.next=15,a.json();case 15:if(!e.sent.message){e.next=26;break}return e.next=19,fetch("http://localhost:5000/getFollowers",{method:"POST",body:JSON.stringify({email:t._id}),headers:{"Content-Type":"application/json"}});case 19:if((a=e.sent).ok){e.next=22;break}return e.abrupt("return");case 22:return e.next=24,a.json();case 24:r=e.sent,Te(r.newFollowing);case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,w.useEffect)((function(){z.length>0&&X?($(""),K(!1)):je(!0)}),[z,X]),(0,w.useEffect)((function(){ne.length>0&&de?(ue(""),le(!1)):je(!0)}),[ne,de]),(0,w.useEffect)((function(){me.length>0&&me.length<240?(Se(""),je(!1)):je(!0)}),[me,ye]),(0,J.jsxs)(h.ZP,{container:!0,spacing:2,children:[(0,J.jsx)(h.ZP,{width:i,justifyContent:"center",alignItems:"center",item:!0,container:!0,children:(0,J.jsxs)(h.ZP,{sm:12,mt:2,item:!0,container:!0,justifyContent:"space-around",direction:"row",spacing:4,children:[(0,J.jsx)(h.ZP,{sm:2,item:!0,children:(0,J.jsxs)("label",{htmlFor:"upload-profile-picture",children:[(0,J.jsx)(ve,{accept:"image/png",id:"upload-profile-picture",type:"file",onChange:function(e){return function(e){e.preventDefault();var t=new FormData;function n(){return(n=(0,a.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(F.H,"/addProfileImage"),{method:"POST",body:t});case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.append("profileImage",e.target.files[0]),t.append("email",localStorage.getItem("email")),function(){n.apply(this,arguments)}()}(e)},disabled:!(U&&T)}),(0,J.jsx)(m.Z,{color:"primary",component:"span","aria-label":"upload profile picture",disabled:!(U&&T),children:t.profilePic.length>"data:image/png;base64,".length?(0,J.jsx)("img",{src:t.profilePic,alt:"profile pic of user",width:100,height:100,style:{borderRadius:"50%"}}):(0,J.jsx)(j.Z,{sx:{fontSize:"100px"}})})]})}),(0,J.jsx)(h.ZP,{sm:7,item:!0,children:(0,J.jsxs)(c.Z,{direction:"column",children:[(0,J.jsx)(f.Z,{color:"dark"===n.palette.mode?"#fff":"#000",variant:"h4",children:"".concat(z," ").concat(ne)}),(0,J.jsx)(f.Z,{color:"dark"===n.palette.mode?"#ddd":"#222",variant:"subtitle1",children:"@".concat(t.username)})]})}),(0,J.jsxs)(h.ZP,{sm:2,item:!0,children:[U&&T?(0,J.jsx)(m.Z,{color:"primary",variant:"outlined",onClick:function(){return W(!0)},children:(0,J.jsx)(b.Z,{})}):U?(0,J.jsxs)(m.Z,{color:"primary",onClick:function(){!function(){Je.apply(this,arguments)}(),Ee(1===Oe?2:1)},children:[2===Oe?(0,J.jsx)(C.Z,{color:"primary"}):(0,J.jsx)(k.Z,{color:"primary"}),2===Oe?"Following":"Follow"]}):null,(0,J.jsx)(x.Z,{open:B,onClose:q,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,J.jsxs)(v.Z,{sx:R,children:[(0,J.jsx)(f.Z,{color:"#fff",id:"modal-modal-title",variant:"h6",component:"h2",children:"Edit Profile Details"}),(0,J.jsx)(g.Z,{margin:"normal",required:!0,fullWidth:!0,id:"changeFirstName",label:"First Name",name:"changeFirstName",autoComplete:"given-name",autoFocus:!0,error:G,onChange:function(e){return V(e.target.value)},helperText:X}),(0,J.jsx)(g.Z,{margin:"normal",required:!0,fullWidth:!0,id:"changeLastName",label:"Last Name",name:"changeLastName",autoComplete:"given-name",autoFocus:!0,error:ie,onChange:function(e){return ae(e.target.value)},helperText:de}),(0,J.jsx)(g.Z,{margin:"normal",required:!0,fullWidth:!0,id:"Bio",label:"Bio",name:"bio",autoComplete:"given-name",autoFocus:!0,error:Ze,onChange:function(e){return fe(e.target.value)},helperText:ye}),(0,J.jsx)(Z.Z,{variant:"filled",color:"success",disabled:Ze||ie||G,onClick:q,children:"Submit"})]})})]})]})}),(0,J.jsx)(h.ZP,{item:!0,ml:2.5,children:(0,J.jsx)(f.Z,{variant:"h6",color:"dark"===n.palette.mode?"#fff":"#000",children:"".concat(me)})}),(0,J.jsx)(h.ZP,{item:!0,ml:2.5,sm:12,children:(0,J.jsxs)(c.Z,{direction:"row",spacing:3,children:[(0,J.jsx)(_,{property:"Followers",data:Ie,isTopic:!1}),(0,J.jsx)(_,{property:"Following",data:t.usersFollowing,isTopic:!1}),(0,J.jsx)(_,{property:"Topics",data:t.topicsFollowing,isTopic:!0})]})}),(0,J.jsx)(h.ZP,{item:!0,sm:12,children:(0,J.jsx)(L,{data:t,isSignedIn:!0})})]})}}}]);
//# sourceMappingURL=169.e044fcee.chunk.js.map
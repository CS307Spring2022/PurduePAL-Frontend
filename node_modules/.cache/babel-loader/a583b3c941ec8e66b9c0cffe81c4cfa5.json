{"ast":null,"code":"import _objectSpread from\"/Users/chintansawla/Documents/GitHub/purduepal-fe/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/chintansawla/Documents/GitHub/purduepal-fe/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import Box from\"@mui/material/Box\";import Typography from\"@mui/material/Typography\";import Modal from\"@mui/material/Modal\";import{Button,Fab,IconButton,Stack,TextField,Autocomplete,createFilterOptions}from\"@mui/material\";import AddIcon from\"@mui/icons-material/Add\";import AddAPhotoIcon from\"@mui/icons-material/AddAPhoto\";import{useTheme,useMediaQuery}from\"@mui/material\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var filter=createFilterOptions();export default function FreeSoloCreateOption(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),errorTopic=_useState4[0],setErrorTopic=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),errorTopicMessage=_useState6[0],setErrorTopicMessage=_useState6[1];useEffect(function(){if(value!==null){if(value.length<=0||value.length>50){setErrorTopic(true);setErrorTopicMessage(\"Topic must be between 1-50 characters\");}else{setErrorTopic(false);setErrorTopicMessage(\"\");}}},[value]);return/*#__PURE__*/_jsx(Autocomplete,{value:value,onChange:function onChange(event,newValue){console.log(newValue);if(typeof newValue===\"string\"){console.log(newValue,newValue.length);if(newValue.length===0||newValue.length>50){setErrorTopic(true);setErrorTopicMessage(\"Topic must be 1-50 characters\");}else{setErrorTopic(false);setErrorTopicMessage(\"\");setValue({title:newValue});}}else if(newValue&&newValue.inputValue){// Create a new value from the user input\nconsole.log(newValue,newValue.length);if(newValue.inputValue.length===0||newValue.inputValue.length>50){setErrorTopic(true);setErrorTopicMessage(\"Topic must be 1-50 characters\");}else{setErrorTopic(false);setErrorTopicMessage(\"\");setValue({title:newValue.inputValue});}}else{setValue(newValue);}},filterOptions:function filterOptions(options,params){var filtered=filter(options,params);var inputValue=params.inputValue;// Suggest the creation of a new value\nvar isExisting=options.some(function(option){return inputValue===option.title;});if(inputValue!==\"\"&&!isExisting){filtered.push({inputValue:inputValue,title:\"Add \\\"\".concat(inputValue,\"\\\"\")});}return filtered;},selectOnFocus:true,clearOnBlur:true,handleHomeEndKeys:true,id:\"free-solo-with-text-demo\",options:topicOptions,getOptionLabel:function getOptionLabel(option){// Value selected with enter, right from the input\nif(typeof option===\"string\"){return option;}// Add \"xxx\" option created dynamically\nif(option.inputValue){return option.inputValue;}// Regular option\nreturn option.title;},renderOption:function renderOption(props,option){return/*#__PURE__*/_jsx(\"li\",_objectSpread(_objectSpread({},props),{},{children:option.title}));},sx:{width:\"50%\"},freeSolo:true,renderInput:function renderInput(params){return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{error:errorTopic,helperText:errorTopicMessage,label:\"Choose Topic\"}));}});}var topicOptions=[{title:\"Marvel\"},{title:\"DC\"},{title:\"Purdue\"},{title:\"Math\"}];var style={position:\"absolute\",top:\"50%\",left:\"50%\",transform:\"translate(-50%, -50%)\",width:400,bgcolor:\"#333\",border:\"2px solid #000\",boxShadow:24,p:4};var ariaLabel={\"aria-label\":\"description\"};export var CreatePost=function CreatePost(){var theme=useTheme();var matches=useMediaQuery(theme.breakpoints.down(\"sm\"));var fabPosWidth=matches?\"80px\":\"16px\";var fabPosHeight=matches?\"22px\":\"40px\";var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),postText=_useState8[0],setPostText=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),open=_useState10[0],setOpen=_useState10[1];var handleOpen=function handleOpen(){return setOpen(true);};var handleClose=function handleClose(){setOpen(false);setErrorText(false);setErrorTextMessage(\"\");};var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),post=_useState12[0],setPost=_useState12[1];var handleSubmit=function handleSubmit(){//dummy code to handle creating post\nsetPost(true);setInterval(setPost(true),1000);setPost(false);console.log(post);};var isURL=function isURL(str){var url;try{url=new URL(str);}catch(_){return false;}return true;};var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),paste=_useState14[0],setPaste=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),errorText=_useState16[0],setErrorText=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),errorTextMessage=_useState18[0],setErrorTextMessage=_useState18[1];var handleTextLength=function handleTextLength(text){// console.log(isURL(text),text);\nvar urlValid=isURL(text);if(text.length>280||text.length<=0){console.log(urlValid,text);if(!urlValid&&(text.includes(\"http://\")||text.includes(\"https://\"))){setErrorText(true);setErrorTextMessage(\"URL is invalid\");}else if(!urlValid){setErrorText(true);setErrorTextMessage(\"Post Must Contain Between 1-280 characters\");}else{setErrorText(false);setErrorTextMessage(\"\");}}else{if(!urlValid&&(text.includes(\"http://\")||text.includes(\"https://\"))){setErrorText(true);setErrorTextMessage(\"URL is invalid\");}else{setErrorText(false);setErrorTextMessage(\"\");}}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Fab,{color:\"primary\",\"aria-label\":\"add\",sx:{position:\"fixed\",bottom:fabPosWidth,right:fabPosHeight},onClick:handleOpen,children:/*#__PURE__*/_jsx(AddIcon,{})}),/*#__PURE__*/_jsx(Modal,{open:open,onClose:handleClose,\"aria-labelledby\":\"modal-modal-title\",\"aria-describedby\":\"modal-modal-description\",children:/*#__PURE__*/_jsx(Box,{sx:style,children:/*#__PURE__*/_jsxs(Stack,{spacing:2,children:[/*#__PURE__*/_jsx(Typography,{color:\"#eee\",id:\"modal-modal-title\",variant:\"h6\",component:\"h2\",children:\"Create a Post\"}),/*#__PURE__*/_jsx(FreeSoloCreateOption,{}),/*#__PURE__*/_jsx(TextField,{multiline:true,rows:4,error:errorText,fullWidth:true,placeholder:\"Type something\",inputProps:ariaLabel,helperText:errorTextMessage,onChange:function onChange(e){if(!paste){// console.log(\"changed!! \"+e.target.value)\nsetPostText(e.target.value);console.log(\"changed!! \"+postText);handleTextLength(e.target.value);}setPaste(false);},onPaste:function onPaste(e){// console.log(\"pasted!! \")\nsetPaste(true);e.clipboardData.items[0].getAsString(function(text){setPostText(text);handleTextLength(text);});}}),/*#__PURE__*/_jsx(Stack,{direction:\"row\",children:/*#__PURE__*/_jsx(IconButton,{color:\"primary\",children:/*#__PURE__*/_jsx(AddAPhotoIcon,{})})}),/*#__PURE__*/_jsx(Button,{disabled:errorText?true:false,variant:\"contained\",onClick:handleSubmit,children:\"Post\"})]})})})]});};","map":{"version":3,"sources":["/Users/chintansawla/Documents/GitHub/purduepal-fe/src/components/CreatePost.jsx"],"names":["useState","useEffect","Box","Typography","Modal","Button","Fab","IconButton","Stack","TextField","Autocomplete","createFilterOptions","AddIcon","AddAPhotoIcon","useTheme","useMediaQuery","filter","FreeSoloCreateOption","value","setValue","errorTopic","setErrorTopic","errorTopicMessage","setErrorTopicMessage","length","event","newValue","console","log","title","inputValue","options","params","filtered","isExisting","some","option","push","topicOptions","props","width","style","position","top","left","transform","bgcolor","border","boxShadow","p","ariaLabel","CreatePost","theme","matches","breakpoints","down","fabPosWidth","fabPosHeight","postText","setPostText","open","setOpen","handleOpen","handleClose","setErrorText","setErrorTextMessage","post","setPost","handleSubmit","setInterval","isURL","str","url","URL","_","paste","setPaste","errorText","errorTextMessage","handleTextLength","text","urlValid","includes","bottom","right","e","target","clipboardData","items","getAsString"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\nimport Box from \"@mui/material/Box\";\nimport Typography from \"@mui/material/Typography\";\nimport Modal from \"@mui/material/Modal\";\nimport {\n  Button,\n  Fab,\n  IconButton,\n  Stack,\n  TextField,\n  Autocomplete,\n  createFilterOptions,\n} from \"@mui/material\";\nimport AddIcon from \"@mui/icons-material/Add\";\nimport AddAPhotoIcon from \"@mui/icons-material/AddAPhoto\";\nimport { useTheme, useMediaQuery } from \"@mui/material\";\n\nconst filter = createFilterOptions();\n\nexport default function FreeSoloCreateOption() {\n  const [value, setValue] = useState(null);\n  const [errorTopic,setErrorTopic] = useState(false)\n  const [errorTopicMessage,setErrorTopicMessage] = useState(\"\")\n\n  useEffect(() => {\n    if (value !== null) {\n      if (value.length <= 0 || value.length > 50) {\n        setErrorTopic(true)\n        setErrorTopicMessage(\"Topic must be between 1-50 characters\")\n      } else {\n        setErrorTopic(false)\n        setErrorTopicMessage(\"\")\n      }\n    }\n  }, [value]);\n\n\n  return (\n    <Autocomplete\n      value={value}\n      onChange={(event, newValue) => {\n        console.log(newValue)\n        if (typeof newValue === \"string\") {\n          console.log(newValue,newValue.length)\n          if (newValue.length === 0 || newValue.length > 50) {\n            setErrorTopic(true)\n            setErrorTopicMessage(\"Topic must be 1-50 characters\")\n          } else {\n            setErrorTopic(false)\n            setErrorTopicMessage(\"\")\n            setValue({\n              title: newValue,\n            });\n          }\n        } else if (newValue && newValue.inputValue) {\n          // Create a new value from the user input\n          console.log(newValue,newValue.length)\n          if (newValue.inputValue.length === 0 || newValue.inputValue.length > 50) {\n            setErrorTopic(true)\n            setErrorTopicMessage(\"Topic must be 1-50 characters\")\n          } else {\n            setErrorTopic(false)\n            setErrorTopicMessage(\"\")\n            setValue({\n              title: newValue.inputValue,\n            });\n          }\n        } else {\n          setValue(newValue);\n        }\n      }}\n      filterOptions={(options, params) => {\n        const filtered = filter(options, params);\n\n        const { inputValue } = params;\n        // Suggest the creation of a new value\n        const isExisting = options.some(\n          (option) => inputValue === option.title\n        );\n        if (inputValue !== \"\" && !isExisting) {\n          filtered.push({\n            inputValue,\n            title: `Add \"${inputValue}\"`,\n          });\n        }\n\n        return filtered;\n      }}\n      selectOnFocus\n      clearOnBlur\n      handleHomeEndKeys\n      id=\"free-solo-with-text-demo\"\n      options={topicOptions}\n      getOptionLabel={(option) => {\n        // Value selected with enter, right from the input\n        if (typeof option === \"string\") {\n          return option;\n        }\n        // Add \"xxx\" option created dynamically\n        if (option.inputValue) {\n          return option.inputValue;\n        }\n        // Regular option\n        return option.title;\n      }}\n      renderOption={(props, option) => <li {...props}>{option.title}</li>}\n      sx={{ width: \"50%\" }}\n      freeSolo\n      renderInput={(params) => <TextField {...params} error={errorTopic} helperText={errorTopicMessage} label=\"Choose Topic\" />}\n    />\n  );\n}\n\nconst topicOptions = [\n  { title: \"Marvel\" },\n  { title: \"DC\" },\n  { title: \"Purdue\" },\n  { title: \"Math\" },\n];\n\nconst style = {\n  position: \"absolute\",\n  top: \"50%\",\n  left: \"50%\",\n  transform: \"translate(-50%, -50%)\",\n  width: 400,\n  bgcolor: \"#333\",\n  border: \"2px solid #000\",\n  boxShadow: 24,\n  p: 4,\n};\n\nconst ariaLabel = { \"aria-label\": \"description\" };\n\nexport const CreatePost = () => {\n  const theme = useTheme();\n  const matches = useMediaQuery(theme.breakpoints.down(\"sm\"));\n  const fabPosWidth = matches ? \"80px\" : \"16px\";\n  const fabPosHeight = matches ? \"22px\" : \"40px\";\n  const [postText, setPostText] = useState(\"\");\n  const [open, setOpen] = useState(false);\n  const handleOpen = () => setOpen(true);\n  const handleClose = () => {\n    setOpen(false);\n    setErrorText(false);\n    setErrorTextMessage(\"\");\n  }\n  const [post, setPost] = useState(false);\n  const handleSubmit = () => {\n    //dummy code to handle creating post\n    setPost(true);\n    setInterval(setPost(true), 1000);\n    setPost(false);\n    console.log(post);\n  };\n\n  const isURL = (str) => {\n    let url;\n  \n    try {\n      url = new URL(str);\n    } catch (_) {\n      return false;  \n    }\n\n    return true;\n  }\n\n  const [paste,setPaste] = useState(false);\n  const [errorText, setErrorText] = useState(false);\n  const [errorTextMessage, setErrorTextMessage] = useState(\"\");\n  const handleTextLength = (text) => {\n    // console.log(isURL(text),text);\n    const urlValid = isURL(text);\n    if (text.length > 280 || text.length <= 0) {\n      console.log(urlValid,text)\n      if (!urlValid && (text.includes(\"http://\") || (text.includes(\"https://\")))) {\n        setErrorText(true);\n        setErrorTextMessage(\"URL is invalid\") \n      } else if (!urlValid) {\n        setErrorText(true);\n        setErrorTextMessage(\"Post Must Contain Between 1-280 characters\")\n      } else {\n        setErrorText(false)\n        setErrorTextMessage(\"\")          \n      }\n    } else {\n      if (!urlValid && (text.includes(\"http://\") || (text.includes(\"https://\")))) {\n        setErrorText(true);\n        setErrorTextMessage(\"URL is invalid\") \n      } else {\n        setErrorText(false)\n        setErrorTextMessage(\"\")\n      }\n    }\n  }\n  return (\n    <div>\n      <Fab\n        color=\"primary\"\n        aria-label=\"add\"\n        sx={{\n          position: \"fixed\",\n          bottom: fabPosWidth,\n          right: fabPosHeight,\n        }}\n        onClick={handleOpen}\n      >\n        <AddIcon />\n      </Fab>\n      <Modal\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"modal-modal-title\"\n        aria-describedby=\"modal-modal-description\"\n      >\n        <Box sx={style}>\n          <Stack spacing={2}>\n            <Typography\n              color={\"#eee\"}\n              id=\"modal-modal-title\"\n              variant=\"h6\"\n              component=\"h2\"\n            >\n              Create a Post\n            </Typography>\n            <FreeSoloCreateOption />\n            <TextField\n              multiline\n              rows={4}\n              error={errorText}\n              fullWidth\n              placeholder=\"Type something\"\n              inputProps={ariaLabel}\n              helperText={errorTextMessage}\n              onChange={(e) => {\n                if (!paste) {\n                  // console.log(\"changed!! \"+e.target.value)\n                  setPostText(e.target.value);\n                  console.log(\"changed!! \"+postText)\n                  handleTextLength(e.target.value);\n                }\n                setPaste(false);\n              }}\n              onPaste={(e) => {\n                // console.log(\"pasted!! \")\n                setPaste(true);\n                e.clipboardData.items[0].getAsString(text=>{\n                  setPostText(text);\n                  handleTextLength(text);\n                })\n              }}\n            />\n            <Stack direction={\"row\"}>\n              <IconButton color=\"primary\">\n                <AddAPhotoIcon />\n              </IconButton>\n            </Stack>\n            <Button\n              disabled={errorText ? true : false}\n              variant=\"contained\"\n              onClick={handleSubmit}\n            >\n              Post\n            </Button>\n          </Stack>\n        </Box>\n      </Modal>\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}